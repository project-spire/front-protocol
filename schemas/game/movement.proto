syntax = "proto3";

import "math_types.proto";
import "game/transform.proto";

package spire.protocol.game;

enum PMovementState {
  Idle = 0;
  Walking = 1;
  Running = 2;
  Rolling = 3;
  Jumping = 4;
}

message HaltMovementCommand {}

message WalkMovementCommand {
  PVector2 direction = 1;
}

message RunMovementCommand {
  PVector2 direction = 1;
}

message RollMovementCommand {
  PVector2 direction = 1;
}

message JumpMovementCommand {}

message MovementCommand {
  oneof command {
    HaltMovementCommand halt = 1;
    WalkMovementCommand walk = 2;
    RunMovementCommand run = 3;
    RollMovementCommand roll = 4;
  }
}

message MovementSync {
  uint64 entity = 1;
  PMovementState state = 2;
  PVector2 direction = 3;
  PTransform transform = 4;
}

message MovementSyncs {
  repeated MovementSync syncs = 1;
}
